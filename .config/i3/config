# vim: filetype=i3

# i3-gaps
for_window [class="^.*"] border pixel 2
for_window [class=".*"] title_format "  %title"
gaps inner 5
gaps outer 8
smart_borders on
smart_gaps on

# set fonts
set_from_resource $dunst_font       Dunst.font  "monospace 11"
set_from_resource $dmenu_font       Dmenu.font  "monospace:size=11"
set_from_resource $i3_font          i3wm.font   "monospace 11"

# set colors
set_from_resource $bg               background  #002b36
set_from_resource $fg               foreground  #839496

set_from_resource $darkblack        color0      #073642
set_from_resource $darkred          color1      #dc322f
set_from_resource $darkgreen        color2
set_from_resource $darkyellow       color3
set_from_resource $darkblue         color4
set_from_resource $darkpurple       color5
set_from_resource $darkcyan         color6
set_from_resource $darkwhite        color7
set_from_resource $lightblack       color8
set_from_resource $lightred         color9
set_from_resource $lightgreen       color10
set_from_resource $lightyellow      color11
set_from_resource $lightblue        color12
set_from_resource $lightpurple      color13
set_from_resource $lightcyan        color14
set_from_resource $lightwhite       color15

set $mod Mod4
set $alt Mod1
set $term       --no-startup-id $TERMINAL
set $video      --no-startup-id video
set $screencast --no-startup-id screencast
set $audio      --no-startup-id audio
set $camcode    --no-startup-id cam
set $stoprec    --no-startup-id killall ffmpeg & killall screenkey
set $dmenurun   --no-startup-id dmenu_run -fn "$dmenu_font" -nb "$bg" -nf "$fg" -sb "$darkblue" -sf "$bg" -p "Run" 

# systemd NetworkManager
set $netrefresh --no-startup-id sudo -A systemctl restart NetworkManager
set $netstop    --no-startup-id sudo -A systemctl stop NetworkManager

### Audio/mpc ###
set $music      --no-startup-id $TERMINAL -e ncmpcpp
set $play       --no-startup-id mpc play
set $pause      --no-startup-id mpc pause
set $stop       --no-startup-id mpc stop
set $next       --no-startup-id mpc next
set $prev       --no-startup-id mpc prev
set $toggle     --no-startup-id mpc toggle
set $shuffle    --no-startup-id mpc random
set $repeat     --no-startup-id mpc repeat
set $seekf      --no-startup-id mpc seek +10
set $seekb      --no-startup-id mpc seek -10
set $movef      --no-startup-id mpc seek +120
set $moveb      --no-startup-id mpc seek -120
set $start      --no-startup-id mpc seek 0%

### Alsa/amixer ###
set $increase  --no-startup-id amixer sset Master 5%+
set $decrease  --no-startup-id amixer sset Master 5%-
set $middle    --no-startup-id amixer sset Master 50%
set $low       --no-startup-id amixer sset Master 15%
set $truemute  --no-startup-id amixer sset Master toggle
set $micmute   --no-startup-id amixer sset Capture toggle    #mute microphone

### Alsa/amixer ###
#set $increase  --no-startup-id volume -yn -i 5
#set $decrease  --no-startup-id volume -yn -d 5
#set $middle    --no-startup-id volume -yn -v 50
#set $low       --no-startup-id volume -yn -v 15
#set $truemute  --no-startup-id volume -ynm
#set $micmute   --no-startup-id amixer sset Capture toggle    #mute microphone

### PulseAudio/pactl ###
#set $increase   --no-startup-id pactl set-sink-volume 0 +5%     #increase sound volume
#set $decrease   --no-startup-id pactl set-sink-volume 0 -5%     #decrease sound volume
#set $middle     --no-startup-id pactl set-sink-volume 0 50%     #put volume to 50%
#set $low        --no-startup-id pactl set-sink-volume 0 15%     #put volume to 15%
#set $truemute   --no-startup-id pactl set-sink-mute 0 toggle    #mute volume
#set $micmute    --no-startup-id pactl set-source-mute 1 toggle  #mute microphone

#      autostart 
#    -------------

exec --no-startup-id feh --bg-fill ~/.config/wallpaper.png
#exec --no-startup-id nm-applet
#exec --no-startup-id blueberry-tray
exec --no-startup-id xautolock -time 15 -locker "lockscreen -l dimblur"
exec --no-startup-id compton
exec --no-startup-id dunst -font "$dunst_font" -lb "$darkwhite" -lf "$darkblack" -lfr "$lightwhite" -nb "$bg" -nf "$fg" -nfr "$darkblack" -cb "$darkred" -cf "$darkwhite" -cfr "$lightred"
exec --no-startup-id xfce4-volumed-pulse
exec --no-startup-id synclient TapButton1=1
exec --no-startup-id redshift # -l 43.610769:3.876716 -t 6500:3500 -l manual
exec_always --no-startup-id numlockx on
exec_always --no-startup-id $HOME/.config/polybar/launch.sh

# Bindings to make the webcam float and stick.
for_window [title="mpvfloat"] floating enable
for_window [title="mpvfloat"] sticky enable
for_window [title="mpvfloat"] border pixel 0
no_focus [title="mpvfloat"]

# make blueberry float
for_window [class="Blueberry.py"] floating enable
for_window [class="Blueberry.py"] resize 640 480
for_window [class="Blueberry.py"] move position center

# make pavucontrol float
for_window [class="Pavucontrol"] floating enable
for_window [class="Pavucontrol"] resize 640 480
for_window [class="Pavucontrol"] move position center

font pango:$i3_font

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

### Basic bindings ###
# start a terminal
#bindsym $mod+Return exec i3-sensible-terminal
bindsym $mod+Return split h; exec $term
bindsym $mod+Shift+Return split v; exec $term

bindsym Ctrl+$alt+Tab exec --no-startup-id displayselect

#get a dropdown calculator from R
bindsym asciitilde [instance="math"] scratchpad show; move position center
bindsym $mod+asciitilde [instance="console"] scratchpad show; move position center

#get a dropdown terminal using tmux
#bindsym $mod+Delete exec $truemute; exec $pause; workspace $workspace9; exec --no-startup-id lockscreen -l dim
bindsym $mod+Delete exec --no-startup-id prompt "Exit i3?" "i3-msg exit"
bindsym $mod+shift+Delete exec $truemute; exec $pause; workspace $workspace9; exec $term -e tmux; exec $term -e htop

# add/remove gaps
bindsym $mod+KP_Add gaps inner current plus 5; gaps outer current plus 5
bindsym $mod+KP_Subtract gaps inner current minus 5; gaps outer current minus 5

bindsym $mod+KP_Divide split h; exec --no-startup-id notify-send "Notification" "Tile horizontally"

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

bindsym $mod+Tab workspace next
bindsym $mod+Shift+Tab workspace prev

bindsym $mod+BackSpace exec --no-startup-id prompt "Shutdown?" "systemctl poweroff"
bindsym $mod+Shift+BackSpace exec --no-startup-id prompt "Reboot?" "i3exit reboot"

bindsym $mod+Escape exec --no-startup-id dshutdown
bindsym $mod+shift+Escape exec --no-startup-id prompt "Hibernate?" "i3exit hibernate"

# Screenshot
bindsym Print exec --no-startup-id scrot -z '%Y-%m-%d-%H-%M-%S_$wx$h.png' -e 'mv $f ~/Pictures/Screenshots'; exec --no-startup-id notify-send "Notification" "Screenshot Saved"
bindsym $mod+Print exec --no-startup-id scrot -u -z '%Y-%m-%d-%H-%M-%S_$wx$h.png' -e 'mv $f ~/Pictures/Screenshots'; exec --no-startup-id notify-send "Notification" "Screenshot Saved"
bindsym --release $mod+Shift+Print exec --no-startup-id scrot -s -z '%Y-%m-%d-%H-%M-%S_$wx$h.png' -e 'mv $f ~/Pictures/Screenshots'; exec --no-startup-id notify-send "Notification" "Screenshot Saved"

# Screencasting
bindsym Insert exec $camcode; exec --no-startup-id notify-send "Notification" "Start camcoding"
bindsym Shift+Insert exec $audio; exec --no-startup-id notify-send "Notification" "Start recording audio"
bindsym $mod+Insert exec $video; exec --no-startup-id notify-send "Notification" "Start recording video"
bindsym $mod+Shift+Insert exec $screencast; exec --no-startup-id notify-send "Notification" "Start Screencasting"
bindsym $mod+Pause exec $stoprec; exec --no-startup-id notify-send "Notification" "Recording Stopped"

### Arrows bindings ###
# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

### Letter Keybinds ###

bindsym $mod+a focus parent
bindsym $mod+Shift+a focus child

bindsym $mod+b exec --no-startup-id $BROWSER
bindsym $mod+Shift+b exec $prev
bindsym $mod+$alt+b exec $seekb

bindsym $mod+c exec $term -e weechat
bindsym $mod+Shift+c exec $term -e calcurse

bindsym $mod+d exec --no-startup-id roficolors 
bindsym $mod+Shift+d exec --no-startup-id displayselect

bindsym $mod+e layout toggle split
bindsym $mod+Shift+e mode $mode_resize

bindsym $mod+f fullscreen toggle
bindsym $mod+Shift+f exec --no-startup-id flash

bindsym $mod+g exec --no-startup-id gimp
bindsym $mod+Shift+g exec --no-startup-id $HOME/.config/polybar/launch.sh

bindsym $mod+h focus left
bindsym $mod+Shift+h move left
bindsym $mod+$alt+h resize shrink width 10 px or 10 ppt

bindsym $mod+i exec $term -e htop
bindsym $mod+Shift+i exec --no-startup-id gmtp

bindsym $mod+j focus down
bindsym $mod+Shift+j move down
bindsym $mod+$alt+j resize grow height 10 px or 10 ppt

bindsym $mod+k focus up
bindsym $mod+Shift+k move up
bindsym $mod+$alt+k resize shrink height 10 px or 10 ppt

bindsym $mod+l focus right
bindsym $mod+Shift+l move right
bindsym $mod+$alt+l resize grow width 10 px or 10 ppt

bindsym $mod+m exec $term -e neomutt
bindsym $mod+Shift+m exec $music

bindsym $mod+n exec $term -e newsboat
bindsym $mod+Shift+n exec $next
bindsym $mod+$alt+n exec $seekf

bindsym $mod+o exec --no-startup-id camtoggle
bindsym $mod+Shift+o gaps inner current set 5; gaps outer current set 8

bindsym $mod+p exec $toggle
bindsym $mod+Shift+p exec --no-startup-id mpdnotif

bindsym $mod+q exec --no-startup-id qutebrowser
bindsym $mod+Shift+q kill

bindsym $mod+r exec $term -e ranger
bindsym $mod+Shift+r exec $term -e sudo ranger /mnt

bindsym $mod+s layout stacking
bindsym $mod+Shift+s exec $stop

bindsym $mod+t exec $term -e transmission-remote-cli
bindsym $mod+Shift+t exec --no-startup-id torrents

bindsym $mod+u exec $term -e nmtui
bindsym $mod+Shift+u exec --no-startup-id killall -q polybar

bindsym $mod+v split v; exec --no-startup-id notify-send "Notification" "Tile vertically"
bindsym $mod+Shift+v exec $term -e ranger ~/Programming/projects/webdev/

bindsym $mod+w exec $netrefresh
bindsym $mod+Shift+w exec $netstop

bindsym $mod+x exec --no-startup-id lockscreen -l dim
bindsym $mod+Shift+x exec  --no-startup-id ~/Documents/Browser/start-tor-browser

bindsym $mod+y split toggle
bindsym $mod+Shift+y exec $movef

bindsym $mod+z layout tabbed
bindsym $mod+Shift+z gaps inner current set 0; gaps outer current set 0

#set $workspace1 "&#xf120;"
#set $workspace2 "&#xf0ac;"
#set $workspace3 "&#xf121;"
#set $workspace4 "&#xf07b;"
#set $workspace5 "&#xf0c5;"
#set $workspace6 "&#xf128;"
#set $workspace7 "&#xf03d;"
#set $workspace8 "&#xf086;"
#set $workspace9 "&#xf1b6;"
#set $workspace10 "&#xf008;"

# Put only numbers so it can be recognized by polybar
set $workspace1 "1"
set $workspace2 "2"
set $workspace3 "3"
set $workspace4 "4"
set $workspace5 "5"
set $workspace6 "6"
set $workspace7 "7"
set $workspace8 "8"
set $workspace9 "9"
set $workspace10 "10"


# Assign applications to workspaces
assign [class="Gnome-terminal|Xfce4-terminal"] $workspace1
assign [class="Firefox|Google-chrome|qutebrowser|Surf"] $workspace2
assign [class="Subl3|Code|Atom|Squeak"] $workspace3
assign [class="Nautilus|Thunar"] $workspace4
assign [class="libreoffice-writer|libreoffice-calc|libreoffice-impress|libreoffice-math|libreoffice-startcenter|Acroread|Mousepad|Gimp|krita|grafx2"] $workspace5
assign [class="qBittorrent|Wine|wow.exe|Tor Browser"] $workspace6
assign [class="obs|Cheese|Arandr"] $workspace7
assign [class="Hexchat|skypeforlinux|ViberPC"] $workspace8
assign [class="Steam|Mainwindow.py"] $workspace9
assign [class="Rhythmbox|Gnome-music|Vlc|vlc|ProjectM-pulseaudio"] $workspace10

for_window [window_role="gimp-dock"] floating disable; move left; resize shrink width 50 px or 50 ppt
for_window [window_role="gimp-toolbox"] floating disable; move right; resize grow width 30 px or 30 ppt
for_window [window_role="GtkFileChooserDialog"] resize shrink height 10 px

for_window [class="Arandr"] floating enabled
for_window [class="Arandr"] resize set 640 480
for_window [class="Arandr"] move position center

bindsym $mod+Home workspace $workspace1
bindsym $mod+Shift+Home move container to workspace $workspace1

bindsym $mod+End workspace $workspace10
bindsym $mod+Shift+End move container to workspace $workspace10

# switch to workspace
bindsym $mod+ampersand workspace $workspace1
bindsym $mod+eacute workspace $workspace2
bindsym $mod+quotedbl workspace $workspace3
bindsym $mod+apostrophe workspace $workspace4
bindsym $mod+parenleft workspace $workspace5
bindsym $mod+minus workspace $workspace6
bindsym $mod+egrave workspace $workspace7
bindsym $mod+underscore workspace $workspace8
bindsym $mod+ccedilla workspace $workspace9
bindsym $mod+agrave workspace $workspace10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $workspace1
bindsym $mod+Shift+eacute move container to workspace $workspace2
bindsym $mod+Shift+quotedbl move container to workspace $workspace3
bindsym $mod+Shift+4 move container to workspace $workspace4
bindsym $mod+Shift+5 move container to workspace $workspace5
bindsym $mod+Shift+6 move container to workspace $workspace6
bindsym $mod+Shift+egrave move container to workspace $workspace7
bindsym $mod+Shift+8 move container to workspace $workspace8
bindsym $mod+Shift+ccedilla move container to workspace $workspace9
bindsym $mod+Shift+agrave move container to workspace $workspace10

# resize window (you can also use the mouse for that)
set $mode_resize " resize"
mode $mode_resize {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym h resize shrink width 10 px or 10 ppt
        bindsym j resize grow height 10 px or 10 ppt
        bindsym k resize shrink height 10 px or 10 ppt
        bindsym l resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}


### Function Keys ###
#bindsym F1
#bindsym F2
#bindsym F3
#bindsym F4
#bindsym F5
#bindsym F6
#bindsym F7
#bindsym F8
#bindsym F9
#bindsym F10
#bindsym F11
#bindsym F12

#bindsym $mod+F1
bindsym $mod+F2     exec $low
bindsym $mod+F3     exec $middle
#bindsym $mod+F4
bindsym $mod+F5     restart
#bindsym $mod+F6
bindsym $mod+F7     exec $netrefresh
bindsym $mod+F8     exec $micmute
bindsym $mod+F9     exec --no-startup-id dmenumount
bindsym $mod+F10    exec --no-startup-id dmenuumount
bindsym $mod+F11    exec --no-startup-id dmenurecord
#bindsym $mod+F12

bindsym $alt+F4 kill

for_window [instance="math"] border pixel 2
for_window [instance="math"] floating enable
for_window [instance="math"] resize set 640 480
for_window [instance="math"] move position center
for_window [instance="math"] move scratchpad
exec $term -n math -e R -q

for_window [instance="console"] border pixel 2
for_window [instance="console"] floating enable
for_window [instance="console"] resize set 640 480
for_window [instance="console"] move position center
for_window [instance="console"] move scratchpad
exec $term -n console -e tmuxinit

# window_colors
#                         border      background     text        indicator
  client.focused          $darkblue   $darkblue      $darkwhite  $darkblue
  client.focused_inactive $darkblack  $lightblack    $lightblue  $lightblack
  client.unfocused        $darkblack  $darkblack     $lightblue  $lightwhite
  client.urgent           $darkred    $darkred       $lightblue  $lightred
  client.placeholder      $bg         $bg            $fg         $bg       $bg
  client.background       $bg

# Pulse Audio controls
bindsym XF86AudioRaiseVolume            exec $increase
bindsym XF86AudioLowerVolume            exec $decrease
bindsym XF86AudioMute                   exec $truemute
bindsym $mod+XF86AudioRaiseVolume       exec $middle
bindsym $mod+XF86AudioLowerVolume       exec $low
bindsym $mod+XF86AudioMute              exec $micmute

# Sreen brightness controls
bindsym XF86MonBrightnessUp             exec --no-startup-id xbacklight -inc 5 # increase screen brightness
bindsym XF86MonBrightnessDown           exec --no-startup-id xbacklight -dec 5 # decrease screen brightness
bindsym $mod+XF86MonBrightnessUp        exec --no-startup-id xbacklight -inc 10 # increase screen brightness
bindsym $mod+XF86MonBrightnessDown      exec --no-startup-id xbacklight -dec 10 # decrease screen brightness

# Touchpad controls
bindsym XF86TouchpadToggle              exec --no-startup-id toggletouchpad # toggle touchpad
#bindsym XF86TouchpadOn                 exec --no-startup-id toggletouchpad # toggle touchpad
#bindsym XF86TouchpadOff                exec --no-startup-id toggletouchpad # toggle touchpad

# Media player controls
bindsym XF86AudioPlay                   exec $play
bindsym XF86AudioPause                  exec $pause
bindsym XF86AudioNext                   exec $next
bindsym XF86AudioPrev                   exec $prev

# force keyboard layout
exec_always --no-startup-id setxkbmap -layout fr,ar -option 'grp:alt_shift_toggle'

# lockscreen initialization
exec --no-startup-id lockscreen -i

