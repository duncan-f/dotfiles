#!/usr/bin/env sh

if [[ -n $BLOCK_INSTANCE ]]; then
	bat="$BLOCK_INSTANCE"
else
	bat="BAT0"
fi

capacity=$(cat /sys/class/power_supply/$bat/capacity) || exit
status=$(cat /sys/class/power_supply/$bat/status)

[ $capacity -lt 10 ] &&	warn="â—"

[ -z "$warn" ] && warn=" "

[ $status = "Charging" ] && warn=" "

printf '%s%s%s\n' "$(echo $status | sed "s/Charging/ğŸ”Œ/;s/Discharging/ğŸ”‹/;s/Not Charging/ğŸ›‘/;s/Unknown/â™»/;s/Full/âš¡/")" "$warn" "$(echo $capacity | sed 's/$/%/')"
